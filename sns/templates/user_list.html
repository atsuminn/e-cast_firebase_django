<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">

<title>User List</title>
</head>

<body>
<h1>User List</h1>
<div id="app">
    
    <ul class="timeline-wrap">
    </ul>

</div>
<form action="{% url 'timeline_post_view'%}"  method="get" id="Timeline_Post_View">{% csrf_token %}
        <div>
        <button type="submit" form="Timeline_Post_View">Edit</button><br>
        </div>
</form>
<div class="opp"></div>
<script src="https://unpkg.com/vue"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
const vm = new Vue({
delimiters: ['{', '}'],
  data() {
      return {
        items: [],
        test: null
      }
  },
  mounted () {
      this.request()
  },
  methods: {
    request () {
      axios
      .get('http://127.0.0.1:8000/timeline_api')
        .then((res) => {
            console.log(res.data)
            let result =''
            res.data.forEach(item => {
                result += '<form action="{% url 'follow'%} method="post" id="Follow"">' + '<li>' + item.id + ',' + item.username + ',' + item.follow + ',' + item.follower + '<button type="submit"  form="Follow">Follow</button>' + '</li>' + '</form>'
            });
            document.querySelector('.timeline-wrap').innerHTML = result
        //   this.items = array;
        })
        .catch((err) => {
          console.log(err);
        });
    }
  }
}).$mount('#app');
</script>
</body>

</html> 